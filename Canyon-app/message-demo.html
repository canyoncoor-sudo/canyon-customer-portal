<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8" /> <title>Canyon Messaging Demo</title> <style> body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: #f3f4f6; margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; } .app { background: #ffffff; width: 100%; max-width: 900px; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); display: flex; flex-direction: column; overflow: hidden; } .app-header { padding: 12px 16px; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; background: #111827; color: #f9fafb; } .app-header h1 { font-size: 18px; margin: 0; } .role-switch { display: flex; gap: 8px; align-items: center; font-size: 13px; } .role-switch button { padding: 6px 10px; border-radius: 999px; border: 1px solid transparent; background: #374151; color: #f9fafb; cursor: pointer; font-size: 12px; } .role-switch button.active { background: #f9fafb; color: #111827; } .role-switch span { opacity: 0.7; } .app-main { display: grid; grid-template-columns: 260px 1fr; min-height: 480px; } .sidebar { border-right: 1px solid #e5e7eb; padding: 12px; background: #f9fafb; } .sidebar h2 { font-size: 14px; margin: 0 0 8px; color: #374151; } .profile-card { border-radius: 8px; padding: 10px; border: 1px solid #e5e7eb; background: #ffffff; margin-bottom: 10px; font-size: 13px; } .profile-title { font-weight: 600; margin-bottom: 2px; } .profile-subtitle { font-size: 12px; color: #6b7280; margin-bottom: 4px; } .profile-meta { font-size: 12px; color: #4b5563; } .conversation-label { margin-top: 16px; font-size: 12px; text-transform: uppercase; letter-spacing: 0.08em; color: #9ca3af; } .conversation-name { font-size: 13px; color: #111827; margin-top: 4px; font-weight: 500; } .chat-container { display: flex; flex-direction: column; height: 100%; } .chat-header { padding: 12px 16px; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; } .chat-header-title { font-weight: 600; font-size: 14px; color: #111827; } .chat-header-sub { font-size: 12px; color: #6b7280; } .chat-messages { flex: 1; padding: 16px; overflow-y: auto; background: #f3f4f6; } .message-row { display: flex; margin-bottom: 10px; } .message-row.me { justify-content: flex-end; } .message-bubble { max-width: 60%; border-radius: 12px; padding: 8px 10px; font-size: 13px; line-height: 1.4; position: relative; display: inline-block; } .message-row.me .message-bubble { background: #3b82f6; color: #ffffff; border-bottom-right-radius: 4px; } .message-row.them .message-bubble { background: #ffffff; color: #111827; border-bottom-left-radius: 4px; border: 1px solid #e5e7eb; } .message-meta { font-size: 10px; color: #9ca3af; margin-top: 2px; } .message-role-tag { font-size: 10px; text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 2px; color: #9ca3af; } .message-row.me .message-role-tag { text-align: right; } .chat-input-area { border-top: 1px solid #e5e7eb; padding: 10px 12px; background: #ffffff; } .chat-input-row { display: flex; gap: 8px; align-items: flex-end; } .chat-input-row textarea { flex: 1; min-height: 40px; max-height: 120px; resize: vertical; padding: 8px; border-radius: 8px; border: 1px solid #d1d5da; font-size: 13px; font-family: inherit; } .chat-input-row button { padding: 8px 14px; border-radius: 999px; border: none; font-size: 13px; cursor: pointer; background: #3b82f6; color: #ffffff; white-space: nowrap; } .quick-actions { display: flex; gap: 6px; margin-top: 6px; font-size: 11px; flex-wrap: wrap; } .quick-actions button { border-radius: 999px; border: 1px solid #d1d5db; background: #f9fafb; padding: 4px 8px; cursor: pointer; font-size: 11px; color: #374151; } .empty-state { text-align: center; margin-top: 40px; color: #9ca3af; font-size: 13px; } </style> </head> <body> <div class="app"> <header class="app-header"> <h1>Canyon Messaging Prototype</h1> <div class="role-switch"> <span>Viewing as:</span> <button id="btnHomeowner" class="active">Demo Homeowner</button> <button id="btnContractor">Demo Contractor</button> </div> </header> <div class="app-main"> <!-- LEFT SIDEBAR --> <aside class="sidebar"> <h2>Profiles in this demo</h2> <div class="profile-card"> <div class="profile-title">Demo Homeowner</div> <div class="profile-subtitle">Homeowner Profile</div> <div class="profile-meta"> Name: Jamie Homeowner<br /> City: Salem, OR<br /> Project: Driveway + Drywell </div> </div> <div class="profile-card"> <div class="profile-title">Canyon Construction Inc.</div> <div class="profile-subtitle">Contractor Profile</div> <div class="profile-meta"> CCB#: 256596<br /> Trade: Excavation & Concrete<br /> Rating: ★★★★☆ </div> </div> <div class="conversation-label">Active Conversation</div> <div class="conversation-name"> Demo Homeowner ⇄ Canyon Construction Inc. </div> </aside> <!-- RIGHT: CHAT --> <section class="chat-container"> <div class="chat-header"> <div> <div class="chat-header-title">Messages</div> <div class="chat-header-sub"> Send messages between the demo homeowner and contractor. </div> </div> </div> <div id="chatMessages" class="chat-messages"> <!-- Messages injected by JS --> </div> <div class="chat-input-area"> <div class="chat-input-row"> <textarea id="messageInput" placeholder="Type a message as the current profile..."></textarea> <button id="sendButton">Send</button> </div> <div class="quick-actions"> <span>Quick demo actions:</span> <button data-template="Hi, I’m interested in getting a quote for my project."> Homeowner: Request quote </button> <button data-template="Attached is your drywell and driveway contract for review and signature."> Contractor: Send contract </button> <button data-template="Here are photos of the job site so you can see access and existing conditions."> Send photos note </button> <button data-template="Once you sign the contract, I’ll send over the deposit payment link."> Next steps </button> </div> </div> </section> </div> </div> <script> // --- SIMPLE IN-MEMORY + localStorage MESSAGE STORE --- const STORAGE_KEY = "canyon_demo_messages_v1"; const ROLES = { HOMEOWNER: "homeowner", CONTRACTOR: "contractor" }; let currentRole = ROLES.HOMEOWNER; let messages = loadMessages(); function loadMessages() { try { const raw = localStorage.getItem(STORAGE_KEY); if (!raw) return getSeedMessages(); const parsed = JSON.parse(raw); if (!Array.isArray(parsed)) return getSeedMessages(); return parsed; } catch (e) { return getSeedMessages(); } } function saveMessages() { localStorage.setItem(STORAGE_KEY, JSON.stringify(messages)); } // Seed a couple of starter messages so the thread isn’t empty function getSeedMessages() { const now = new Date(); return [ { id: 1, senderRole: ROLES.HOMEOWNER, text: "Hi Canyon Construction, I’m interested in a quote for a drywell and concrete driveway.", timestamp: now.toISOString() }, { id: 2, senderRole: ROLES.CONTRACTOR, text: "Hi Jamie, thanks for reaching out. I can review your project details and send over a contract today.", timestamp: now.toISOString() } ]; } function formatTime(ts) { const d = new Date(ts); return d.toLocaleTimeString([], { hour: "numeric", minute: "2-digit" }); } function renderMessages() { const container = document.getElementById("chatMessages"); container.innerHTML = ""; if (!messages.length) { const empty = document.createElement("div"); empty.className = "empty-state"; empty.textContent = "No messages yet. Send one to start the conversation."; container.appendChild(empty); return; } messages.forEach(msg => { const isMe = msg.senderRole === currentRole; const row = document.createElement("div"); row.className = "message-row " + (isMe ? "me" : "them"); const wrapper = document.createElement("div"); const roleTag = document.createElement("div"); roleTag.className = "message-role-tag"; roleTag.textContent = msg.senderRole === ROLES.HOMEOWNER ? "Homeowner" : "Contractor"; const bubble = document.createElement("div"); bubble.className = "message-bubble"; bubble.textContent = msg.text; const meta = document.createElement("div"); meta.className = "message-meta"; meta.textContent = formatTime(msg.timestamp); wrapper.appendChild(roleTag); wrapper.appendChild(bubble); wrapper.appendChild(meta); row.appendChild(wrapper); container.appendChild(row); }); // Scroll to bottom container.scrollTop = container.scrollHeight; } function sendMessage(text) { if (!text || !text.trim()) return; const msg = { id: Date.now(), senderRole: currentRole, text: text.trim(), timestamp: new Date().toISOString() }; messages.push(msg); saveMessages(); renderMessages(); } // --- EVENT WIRING --- document.addEventListener("DOMContentLoaded", () => { const btnHomeowner = document.getElementById("btnHomeowner"); const btnContractor = document.getElementById("btnContractor"); const input = document.getElementById("messageInput"); const sendBtn = document.getElementById("sendButton"); const quickButtons = document.querySelectorAll(".quick-actions button[data-template]"); btnHomeowner.addEventListener("click", () => { currentRole = ROLES.HOMEOWNER; btnHomeowner.classList.add("active"); btnContractor.classList.remove("active"); renderMessages(); }); btnContractor.addEventListener("click", () => { currentRole = ROLES.CONTRACTOR; btnContractor.classList.add("active"); btnHomeowner.classList.remove("active"); renderMessages(); }); sendBtn.addEventListener("click", () => { sendMessage(input.value); input.value = ""; input.focus(); }); input.addEventListener("keydown", (e) => { if (e.key === "Enter" && !e.shiftKey) { e.preventDefault(); sendMessage(input.value); input.value = ""; } }); quickButtons.forEach(btn => { btn.addEventListener("click", () => { const template = btn.getAttribute("data-template") || ""; input.value = template; input.focus(); }); }); renderMessages(); }); </script> </body> </html>